<!DOCTYPE html>
<html lang="pt">
    <head>
        <title>Registar</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--JQUERY-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.2/jquery.min.js" integrity="sha512-tWHlutFnuG0C6nQRlpvrEhE4QpkG1nn2MOUMWmUeRePl4e3Aki0VB6W1v3oLjFtd0hVOtRQ9PHpSfN6u6/QXkQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <!--BootStrap 5.2-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
        <link rel="stylesheet" href="{{url_for('static', filename='css/comum.css')}}"> 
    </head>
    <body class="bg-secondary">
        <header class="py-4">
            <h1 class="text-center text-white fw-bold">Registar Utilizador</h1>
        </header>
        <div style="width: 90%; padding-top: 15%; padding-bottom: 5%; margin-top: 15%;" class="container bg-light rounded-5 shadow-lg">
            <div class="position-absolute start-50 translate-middle" style=" z-index: 1; margin-top: -15%;">
                <div class="d-flex justify-content-center">
                    <img
                            src="{{url_for('static', filename='Logo.png')}}"
                            alt=""
                            class="border border-2 rounded-circle"
                            width="160px"
                            height="160px"
                    />
                </div>
            </div>
            <form class=" w-100 col-6" method="POST" action="" novalidate>
                {{formFront.hidden_tag()}}
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.username.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                <i class="fa fa-user text-white"></i>
                            </span>
                            {% if formFront.username.errors %}
                                {{formFront.username(class="form-control is-invalid", id="username", placeholder="ex: Nikola Tesla")}}
                                {% else %}
                                {{formFront.username(class="form-control", id="username", placeholder="ex: Nikola Tesla")}}
                            {% endif %}
                        </div>
                        {% if formFront.username.errors %}
                        {% for error in formFront.username.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                    </div>
                </fieldset>
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.student_number.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                <i class="fa fa-university text-white"></i>
                            </span>
                            {% if formFront.student_number.errors %}
                                {{formFront.student_number(class="form-control is-invalid", id="schoolNumber", placeholder="ex: a21711943")}}
                                {% else %}
                                {{formFront.student_number(class="form-control", id="schoolNumber", placeholder="ex: a21711943")}}
                            {% endif %}
                        </div>
                        {% if formFront.student_number.errors %}
                        {% for error in formFront.student_number.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                    </div>
                </fieldset>
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.phone_number.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                 <i class="fa fa-phone text-white"></i>
                            </span>
                            {% if formFront.phone_number.errors %}
                                {{formFront.phone_number(class="form-control is-invalid", id="userContact", placeholder="ex: 919100756")}}
                                {% else %}
                                {{formFront.phone_number(class="form-control", id="userContact", placeholder="ex: 919100756")}}
                            {% endif %}
                        </div>
                        {% if formFront.phone_number.errors %}
                        {% for error in formFront.phone_number.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                    </div>
                </fieldset>
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.password.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                <i class="fa fa-key text-white"></i>
                            </span>
                            {% if formFront.password.errors %}
                                {{formFront.password(class="form-control is-invalid", id="userPassword", placeholder="ex: Bobin@D3Te5L@")}}
                                {% else %}
                                {{formFront.password(class="form-control", id="userPassword", placeholder="ex: Bobin@D3Te5L@")}}
                            {% endif %}
                        </div>
                        {% if formFront.password.errors %}
                        {% for error in formFront.password.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                      </div>
                </fieldset>
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.confirm_password.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                <i class="fa fa-key text-white"></i>
                            </span>
                            {% if formFront.confirm_password.errors %}
                                {{formFront.confirm_password(class="form-control is-invalid", id="confPassword", placeholder="ex: Bobin@D3Te5L@")}}
                                {% else %}
                                {{formFront.confirm_password(class="form-control", id="confPassword", placeholder="ex: Bobin@D3Te5L@")}}
                            {% endif %}
                        </div>
                        {% if formFront.confirm_password.errors %}
                        {% for error in formFront.confirm_password.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                     </div>
                </fieldset>
                
                <fieldset class="my-4">
                    <div class="from-group">
                        {{formFront.user_gender.label(class="form-control-label")}}
                        <div class="input-group my-1">
                            <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                <i class="fa fa-venus-mars text-white"></i>
                            </span>
                            {% if formFront.user_gender.errors %}
                                {{formFront.user_gender(class="form-select is-invalid", id="userGender")}}
                                {% else %}
                                {{formFront.user_gender(class="form-select", id="userGender")}}
                            {% endif %}
                        </div>
                        {% if formFront.user_gender.errors %}
                        {% for error in formFront.user_gender.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                     </div>
                </fieldset>
                <div class="container">
                    <div class="container">
                        <div class="row"> 
                            {{formFront.submitRegist(class="btn btn-primary col-5 my-2", id="RegistBtn")}}
                            <div class="col-2"></div>
                            {{formFront.login(class="btn btn-primary col-5 my-2", id="LogBtn")}}
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </body>
</html>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous">
    </script>
    <script>
        var userNumb = document.getElementById("schoolNumber");
        var userPhone = document.getElementById("userContact");
        var userGen = document.getElementById("userGender");

        $( document ).ready(
            events,
            userGen[0].setAttribute("disabled","selected")
        );

        function events($, undefined) {
            "use strict";
            $(function() {
                userPhone.addEventListener( "keyup", function( event ) {
                    var $this = $(this);
                    var input = $this.val();
                    userPhone.value = input.replace(/[A-Za-z\W\s\._\-]/g, '');
                }); 
                userNumb.addEventListener( "keyup", function( event ) {
                    var $this = $(this);
                    var input = $this.val();
                    var firstChar = input[0];
                    var minusFirst = input.slice(1, input.size);
                    userNumb.value = firstChar.replace(/[0-9\\s\._\-]+/g, '') + minusFirst.replace(/[A-Za-z\\s\._\-]+/g, '');
                }); 
            }); 
        }
    </script>