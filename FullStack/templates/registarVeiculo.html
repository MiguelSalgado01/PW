<!DOCTYPE html>
<html lang="en">
    <head>
        <title>RegistarVeiculo</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
         <!--JQUERY-->
         <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.2/jquery.min.js" integrity="sha512-tWHlutFnuG0C6nQRlpvrEhE4QpkG1nn2MOUMWmUeRePl4e3Aki0VB6W1v3oLjFtd0hVOtRQ9PHpSfN6u6/QXkQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
         <!--BootStrap 5.2-->
         <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
         <link rel="stylesheet" href="{{url_for('static', filename='css/comum.css')}}"> 
    </head>
    <body class="bg-primary">
        <form method="POST" novalidate>
            {{frontVehicleForm.hidden_tag()}}
            <header class="p-3 bg-primary">
                <div class="row align-items-center">
                    <div class="col-2">
                        <a style="cursor:pointer"> 
                            <button class="fa fa-2xl fa-arrow-left text-white" type="submit" name="goBack" value="EcraPrevio" style=" background-color: transparent; border: none;"></button> 
                        </a>           
                    </div>
                    <div class="col-8"> 
                        <div class="m-2 d-flex justify-content-center ">
                            <h2 class="my-1 fw-bold text-white">Registar Veiculo</h2>
                        </div>
                    </div>
                    <div class="col-1"></div>
                </div>
            </header>
            <div style="margin-top: 10%; width: 90%" class="container bg-light rounded-5 p-3 shadow-lg">
                <div class="container w-100 col-6">
                    <fieldset class="my-4">
                        <div class="from-group">
                            {{frontVehicleForm.plate.label(class="form-control-label")}}
                            <div class="input-group my-1">
                                <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                    <i class="fa fa-car text-white"></i>
                                </span>
                                {% if frontVehicleForm.plate.errors %}
                                {{frontVehicleForm.plate(class="form-control is-invalid", id="vehiclePlate", placeholder="ex: 54-DN-75")}}
                                {% else %}
                                {{frontVehicleForm.plate(class="form-control", id="vehiclePlate", placeholder="ex: 54-DN-75")}}
                            {% endif %}
                        </div>
                        {% if frontVehicleForm.plate.errors %}
                        {% for error in frontVehicleForm.plate.errors %}
                            <span>{{error}}</span>
                        {% endfor %}
                        {% else %}
                        {% endif %}
                        </div>
                    </fieldset>
                    <fieldset>
                        <div class="my-4">
                            <div class="from-group">
                                {{frontVehicleForm.color.label(class="form-control-label")}}
                                <div class="input-group my-1 needs-validation" >
                                    <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                        <i class="fa fa-fill-drip text-white"></i>
                                    </span>
                                    {% if frontVehicleForm.color.errors %}
                                    {{frontVehicleForm.color(class="form-control is-invalid", id="vehicleColor", placeholder="ex: Vermelho")}}
                                    {% else %}
                                    {{frontVehicleForm.color(class="form-control", id="vehicleColor", placeholder="ex: Vermelho")}}
                                {% endif %}
                            </div>
                            {% if frontVehicleForm.color.errors %}
                            {% for error in frontVehicleForm.color.errors %}
                                <span>{{error}}</span>
                            {% endfor %}
                            {% else %}
                            {% endif %}
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="my-4">
                        <div class="from-group">
                            {{frontVehicleForm.sits.label(class="form-control-label")}}
                            <div class="input-group my-1">
                                <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                    <i class="fa fa-venus-mars text-white"></i>
                                </span>
                                {% if frontVehicleForm.sits.errors %}
                                    {{frontVehicleForm.sits(class="form-select is-invalid", id="availableSits")}}
                                    {% else %}
                                    {{frontVehicleForm.sits(class="form-select", id="availableSits")}}
                                {% endif %}
                            </div>
                            {% if frontVehicleForm.sits.errors %}
                            {% for error in frontVehicleForm.sits.errors %}
                                <span>{{error}}</span>
                            {% endfor %}
                            {% else %}
                            {% endif %}
                         </div>
                    </fieldset>

                    <fieldset>
                        <div class="my-4">
                            <div class="from-group">
                                {{frontVehicleForm.Specs.label(class="form-control-label")}}
                                <div class="input-group my-1 needs-validation" >
                                    <span class="input-group-text bg-secondary" id="basic-addon1">                    
                                        <i class="fa fa-file-pen text-white"></i>
                                    </span>
                                    {% if frontVehicleForm.Specs.errors %}
                                    {{frontVehicleForm.Specs(class="form-control is-invalid", id="vehicleSpecs", rows="6", placeholder="ex: O veiculo é uma mota com cerca de 75km")}}
                                    {% else %}
                                    {{frontVehicleForm.Specs(class="form-control", id="vehicleSpecs", rows="6", placeholder="ex: O veiculo é uma mota com cerca de 75km")}}
                                {% endif %}
                            </div>
                            {% if frontVehicleForm.Specs.errors %}
                            {% for error in frontVehicleForm.Specs.errors %}
                                <span>{{error}}</span>
                            {% endfor %}
                            {% else %}
                            {% endif %}
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div class="container">
                    <div class="row justify-content-center ">
                        {{frontVehicleForm.regist(class="btn btn-outline-secondary col-6 my-5", id="submitBtn")}}
                    </div>
                </div>
            </div>
        </form>
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
        <script>
            var userPlate = document.getElementById("vehiclePlate");
            var sits = document.getElementById("availableSits");
            
            $( document ).ready(
                plateFunction,
                console.log(sits),
            );

            function plateFunction($, undefined) {
                "use strict";
                $(function() {
                    userPlate.addEventListener( "keyup", function( event ) {
                        var selection = window.getSelection().toString();
                        if ( selection !== '' ) {
                            return;
                        }
                        
                        var $this = $(this);
                        var input = $this.val();
                        input = input.replace(/[\W\s\._\-]+/g, '');
                            
                        var split = 2;
                        var chunk = [];

                        for (var i = 0, len = input.length; i < len; i += split) {
                            split = ( i >= 0 && i <= 2 ) ? 2 : 2;
                            chunk.push( input.substr( i, split ) );
                        }
                        $this.val(function() {
                            return chunk.join("-").toUpperCase();
                        });
                    }); 
                   
                });
                
            }
        </script>
    </body>
</html>
